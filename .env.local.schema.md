# .env.local Schema Documentation

Complete list of every runtime variable the Predictive Play web application expects.

## Required Variables

### Supabase Configuration
```bash
# Required - Supabase project URL (public)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Required - Supabase anonymous key (public)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional - Supabase service role key (server-side only)
# Only needed if implementing server-side operations that require elevated permissions
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### Backend API Configuration
```bash
# Required - Backend API URL
# Used by lib/api.ts for all API calls
NEXT_PUBLIC_BACKEND_URL=http://localhost:3001
# Production example: https://your-backend.railway.app
```

### Stripe Configuration
```bash
# Required - Stripe publishable key (public)
# Used by lib/stripe.ts for client-side Stripe operations
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Required (for future server-side routes) - Stripe secret key (server-side only)
# Not currently used but will be needed for checkout sessions and webhooks
STRIPE_SECRET_KEY=sk_test_...

# Required (for future webhook handling) - Stripe webhook secret (server-side only)
# Not currently used but will be needed for webhook verification
STRIPE_WEBHOOK_SECRET=whsec_...
```

### App Configuration
```bash
# Required - Public app URL for redirects and auth callbacks
# Used in app/api/auth/reset-password/route.ts
NEXT_PUBLIC_APP_URL=http://localhost:3000
# Production example: https://predictive-play.com

# Automatic - Node environment (set by platform)
NODE_ENV=development
# Values: development | production | test
```

## Optional Variables

### Railway Platform Variables (Auto-injected when deployed on Railway)
```bash
# Auto-provided by Railway - Database connection string
DATABASE_URL=postgresql://user:password@host:port/database

# Auto-provided by Railway - Project information
RAILWAY_PROJECT_ID=3da09298-1431-40ed-9248-d57dada817ad
RAILWAY_PROJECT_NAME=PredictivePlay
RAILWAY_SERVICE_ID=06d6d68c-b861-4b10-9851-a5be05f2f611
RAILWAY_SERVICE_NAME=zooming-rebirth
RAILWAY_ENVIRONMENT=production
RAILWAY_PUBLIC_DOMAIN=your-app.railway.app

# Auto-provided by Railway - Port
PORT=3000
```

### Analytics & Monitoring (Optional)
```bash
# Optional - Google Analytics measurement ID
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
```

### Development & Debugging (Optional)
```bash
# Optional - Enable debug mode
DEBUG=false

# Optional - API timeout (milliseconds)
API_TIMEOUT=30000
```

## Variable Usage by File

### Client-Side Usage (NEXT_PUBLIC_ prefix required)
- `lib/supabase.ts`: Uses `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `lib/stripe.ts`: Uses `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`
- `lib/api.ts`: Uses `NEXT_PUBLIC_BACKEND_URL`, `NEXT_PUBLIC_SUPABASE_URL`
- `next.config.js`: Exposes client-side variables to the app

### Server-Side Usage
- `app/api/auth/reset-password/route.ts`: Uses `NEXT_PUBLIC_APP_URL`
- Future Stripe API routes will use `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET`

## Default Values and Placeholders

### Development Defaults
```bash
NEXT_PUBLIC_BACKEND_URL=http://localhost:3001  # Fallback in lib/api.ts
NODE_ENV=development  # Set by Next.js
PORT=3000  # Default Next.js port
```

### Placeholder Examples for Non-Secret Values
```bash
NEXT_PUBLIC_APP_URL=http://localhost:3000  # Development
NEXT_PUBLIC_APP_URL=https://predictive-play.com  # Production

NEXT_PUBLIC_BACKEND_URL=http://localhost:3001  # Development
NEXT_PUBLIC_BACKEND_URL=https://api.predictive-play.com  # Production
```

## Critical Notes

1. **NEXT_PUBLIC_ Prefix**: Variables used in client-side code MUST have the `NEXT_PUBLIC_` prefix
2. **Server-Only Variables**: Variables without the prefix are only available server-side
3. **Build-Time Binding**: NEXT_PUBLIC_ variables are embedded at build time, not runtime
4. **Required for Basic Functionality**: Supabase, Backend URL, and App URL are essential
5. **Stripe Variables**: Currently only publishable key is used; secret key needed for future payment processing
6. **Railway Auto-Injection**: When deployed on Railway, database and platform variables are automatically provided

## Minimal Working Configuration

For a basic working setup, you need at minimum:
```bash
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
NEXT_PUBLIC_BACKEND_URL=your_backend_url
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
NEXT_PUBLIC_APP_URL=your_app_url
```
